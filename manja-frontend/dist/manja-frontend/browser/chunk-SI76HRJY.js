import{Aa as T,Ab as w,B as p,Ba as P,Ca as g,Da as y,G as d,I as _,Ia as U,L as R,La as E,M as j,Ma as O,O as F,Oc as c,P as $,Qc as I,Rc as L,Sc as K,T as v,Tc as W,U as B,Va as S,Xa as H,Xc as Q,Y as b,Ya as z,a as o,b as l,ea as D,eb as Y,hb as V,j as m,n as C,p as u,qb as G,ta as A,za as M,zb as J}from"./chunk-4PWNILTY.js";var N=["Janvier","F\xE9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xFBt","Septembre","Octobre","Novembre","D\xE9cembre"],ie=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],X=ie.map(r=>({legend:r,code:r.charAt(0)}));function Z(r,i){return r.map(a=>re(a,i))}function re(r,i){let a=c(),e=i?.month??a.month(),t=r.month()===e,s=i?.openDays?i.openDays.includes(r.day()-1):!0,n=r.isBefore(a,"date"),h=i?.highlightedDates?i.highlightedDates.some(k=>k.isSame(r,"date")):!1;return{value:r,isPriorToCurrent:n,belongsToMonth:t,isCurrentDate:se(r),isOpenDay:s,selectable:s&&!n,selected:ae(r,{selectedDates:i?.selectedDates,selected:i?.selected}),isHighlighted:h}}function se(r){return r.isSame(c(),"date")}function ae(r,i){return!!(i.selected||i.selectedDates?.some(a=>a.value.isSame(r,"date")))}var ne=r=>({"size-8 flex items-center justify-center rounded-full cursor-pointer focus:outline-none":!0,"text-secondary":!0,"text-red-300":r});function oe(r,i){if(r&1&&(g(0,"div",7),S(1),y()),r&2){let a=i.$implicit,e=i.$index,t=O();A("ngClass",Y(3,ne,!t.openDays.includes(e)))("title",t.openDays.includes(e)?a.legend:a.legend+" : Jour non ouvrable"),D(),H(" ",a.code," ")}}var le=(r,i,a,e,t)=>({"size-8 flex items-center justify-center rounded-full cursor-pointer focus:outline-none":!0,"text-primary":r,"text-secondary":i,"text-light bg-dark hover:bg-dark hover:opacity-75":a,"hover:bg-gray-200":e,"bg-tumbleweed":t});function pe(r,i){if(r&1){let a=U();g(0,"div",8),E("click",function(){let s=F(a).$implicit,n=O();return $(n.selectDate(s))}),S(1),y()}if(r&2){let a=i.$implicit;A("title",a.isOpenDay?"":"Jour non ouvrable")("ngClass",V(3,le,a.belongsToMonth&&a.isOpenDay&&!a.isCurrentDate,!a.belongsToMonth&&!a.isOpenDay&&!!a.isCurrentDate,a.isCurrentDate,a.selectable&&!a.selected,a.selectable&&a.selected)),D(),H(" ",a.value.date()," ")}}var ke=(()=>{let i=class i{constructor(){this.weeksNumber=6,this.dateRange=[],this.openDays=[0,1,2,3,4],this.weekDays=X,this.referenceDate=c(),this.selectedDates=[],this.updateSelectedDates=new _,this.updateReferenceDate=new _,this.currentMonth=N[this.referenceDate.month()],this.currentYear=this.referenceDate.year(),this.dailyNonAvailableHours=[],this.generateDates(this.referenceDate)}generateDates(e,t=[]){let s=e.second(1).date(1).second(0),n=e.endOf("month"),h=[];for(let f=1;f<s.day();f++)h.push(s.day(f));for(let f=s.date();f<=n.date();f++)h.push(s.date(f));let k=this.weeksNumber*7-h.length;for(let f=n.date()+1;f<=n.date()+k;f++)h.push(n.date(f));this.setDateRange(Z(h,{month:e.month(),openDays:this.openDays,selectedDates:t}))}setDateRange(e){this.dateRange=e}nextMonth(){this.changeMonth(1)}previousMonth(){this.changeMonth(-1)}changeMonth(e){let t=this.referenceDate.month(this.referenceDate.month()+e);this.currentMonth=N[t.month()],this.currentYear=t.year(),this.generateDates(t,this.selectedDates),this.updateReferenceDate.emit(t)}selectDate(e){e.selectable&&(e.selected=!0,this.updateSelectedDates.emit([e.value]),this.generateDates(this.referenceDate,[e]))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=R({type:i,selectors:[["datepicker"]],inputs:{referenceDate:"referenceDate",selectedDates:"selectedDates",dailyNonAvailableHours:"dailyNonAvailableHours"},outputs:{updateSelectedDates:"updateSelectedDates",updateReferenceDate:"updateReferenceDate"},decls:15,vars:2,consts:[[1,"w-92","select-none"],[1,"max-h-106","w-full","h-96","text-sm"],[1,"mb-5","flex","justify-between"],[1,"text-primary"],[1,"flex","gap-x-1","text-secondary"],[1,"size-6","flex","items-center","justify-center","rounded-full","text-secondary","hover:bg-gray-200","cursor-pointer","focus:outline-none",3,"click"],[1,"grid","grid-cols-7","gap-y-3"],[3,"ngClass","title"],[3,"title","ngClass","click"],[3,"title","ngClass"]],template:function(t,s){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),S(4),y(),g(5,"div",4)(6,"div",5),E("click",function(){return s.previousMonth()}),S(7," < "),y(),g(8,"div",5),E("click",function(){return s.nextMonth()}),S(9," > "),y()()(),g(10,"div",6),T(11,oe,2,5,"div",7,M),T(13,pe,2,9,"div",9,M),y()()()),t&2&&(D(4),z("",s.currentMonth," ",s.currentYear,""),D(7),P(s.weekDays),D(2),P(s.dateRange))},dependencies:[G]});let r=i;return r})();var Te=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=j({type:i}),i.\u0275inj=B({imports:[J]});let r=i;return r})();function Oe(r){return i=>{let a=i.root.get(r);return a&&i.value!==a.value?{notEqual:!0}:null}}function He(r){return i=>{let a=i.value;return a&&a.size/1048576>r?{imageSize:!0}:null}}var ce=[{name:"Hair Styling",slug:"hair-styling",description:"Various hair styling services",imgPath:"https://assets-global.website-files.com/60993dcfc8e83c6e36ae8b81/60a5aef88e07303a3df5cd5b_makeup-salon-webflow-template.jpg",subServices:[{name:"Hair Coloring",slug:"",description:"Get a fresh hair color!",duration:120,price:80,ptgCommission:.15,promotions:[{}],history:[]},{name:"Men Haircut",slug:"men-haircut",description:"Classic men's haircut",duration:30,price:25,ptgCommission:.12,promotions:[{}],history:[]},{name:"Blowout",slug:"blowout",description:"Professional blow-dry styling",duration:45,price:40,ptgCommission:.1,promotions:[{}],history:[]},{name:"Updo",slug:"updo",description:"Elegant updo hairstyles",duration:60,price:60,ptgCommission:.18,promotions:[{}],history:[]}]},{name:"Makeup Artistry",slug:"makeup-artistry",description:"Expert makeup services",imgPath:"https://assets-global.website-files.com/60993dcfc8e83c6e36ae8b81/60a5aef88e07303a3df5cd5b_makeup-salon-webflow-template.jpg",subServices:[{name:"Bridal Makeup",slug:"bridal-makeup",description:"Gorgeous bridal makeup",duration:90,price:150,ptgCommission:.2,promotions:[{}],history:[]},{name:"Evening Glam",slug:"evening-glam",description:"Dramatic evening makeup",duration:60,price:80,ptgCommission:.18,promotions:[{}],history:[]},{name:"Natural Look",slug:"natural-look",description:"Subtle and natural makeup",duration:45,price:60,ptgCommission:.15,promotions:[{}],history:[]},{name:"Airbrush Makeup",slug:"airbrush-makeup-look",description:"Flawless airbrush makeup",duration:75,price:120,ptgCommission:.17,promotions:[{}],history:[]}]},{name:"Nail Services",slug:"nail-services",description:"Beautiful nail treatments",imgPath:"https://assets-global.website-files.com/60993dcfc8e83c6e36ae8b81/60a5aef88e07303a3df5cd5b_makeup-salon-webflow-template.jpg",subServices:[{name:"Manicure",slug:"manicure",description:"Classic nail grooming",duration:45,price:35,ptgCommission:.2,promotions:[{}],history:[]},{name:"Pedicure",slug:"pedicure",description:"Relaxing foot care",duration:60,price:50,ptgCommission:.18,promotions:[{}],history:[]}]},{name:"Facial Treatments",slug:"facial-treatments",description:"Revitalize your skin",imgPath:"https://assets-global.website-files.com/60993dcfc8e83c6e36ae8b81/60a5aef88e07303a3df5cd5b_makeup-salon-webflow-template.jpg",subServices:[{name:"Deep Cleansing Facial",slug:"deep-cleansing-facial",description:"Thorough skin cleansing",duration:75,price:90,ptgCommission:.15,promotions:[{}],history:[]},{name:"Anti-Aging Facial",slug:"anti-aging-facial",description:"Combat signs of aging",duration:90,price:120,ptgCommission:.17,promotions:[{}],history:[]}]}],q=ce.map(r=>r.subServices).flat();var me=[{_id:"1",firstname:"Alice",lastname:"Smith",email:"alice.smith@company.com",username:"asmith",password:"P@ssw0rd1",subServices:[],imgPath:"img-path"},{_id:"2",firstname:"Bob",lastname:"Johnson",email:"bob.johnson@company.com",username:"bjohnson",password:"Secret123",subServices:[],imgPath:"img-path"},{_id:"3",firstname:"Carol",lastname:"Brown",email:"carol.brown@company.com",username:"cbrown",password:"SecurePass1",subServices:[],imgPath:"img-path"},{_id:"4",firstname:"David",lastname:"Lee",email:"david.lee@company.com",username:"dlee",password:"MyP@ssw0rd!",subServices:[],imgPath:"img-path"},{_id:"5",firstname:"Eva",lastname:"Garcia",email:"eva.garcia@company.com",username:"egarcia",password:"Eva1234",subServices:[],imgPath:"img-path"},{_id:"6",firstname:"Frank",lastname:"Rodriguez",email:"frank.rodriguez@company.com",username:"frodriguez",password:"FrankPass",subServices:[],imgPath:"img-path"},{_id:"7",firstname:"Grace",lastname:"Miller",email:"grace.miller@company.com",username:"gmiller",password:"GracePass1",subServices:[],imgPath:"img-path"},{_id:"8",firstname:"Henry",lastname:"Clark",email:"henry.clark@company.com",username:"hclark",password:"Henry1234",subServices:[],imgPath:"img-path"},{_id:"9",firstname:"Isabel",lastname:"Wright",email:"isabel.wright@company.com",username:"iwright",password:"IsabelPass",subServices:[],imgPath:"img-path"},{_id:"10",firstname:"Jack",lastname:"Baker",email:"jack.baker@company.com",username:"jbaker",password:"Baker5678",subServices:[],imgPath:"img-path"},{_id:"11",firstname:"Karen",lastname:"Turner",email:"karen.turner@company.com",username:"kturner",password:"KarenPass",subServices:[],imgPath:"img-path"},{_id:"12",firstname:"Liam",lastname:"Harris",email:"liam.harris@company.com",username:"lharris",password:"Liam9876",subServices:[],imgPath:"img-path"}];function de(r,i=3){let a=0;return r.map(e=>(e.subServices.push(...q.filter((t,s)=>s>=a&&s<a+i)),a++,e))}var ue=de(me);function ee(r){let i=ue;if(!r)return i;if(r.filters){if(r.filters.name){let a=r.filters.name;i=i.filter(e=>e.firstname.includes(a))}if(r.filters.serviceSlug){let a=r.filters.serviceSlug;i=i.filter(e=>e.subServices.some(t=>t.slug===a))}}return r.orderBy&&(r.orderBy.field,r.orderBy.order==="ASC"||r.orderBy.order==="DESC"&&i.reverse()),i}var Be=(()=>{let i=class i{constructor(e){this.http=e,this.employeeList=new m(null)}getEmployees(e){return C(ee(e)).pipe(d({next:t=>{this.setEmployees(t)},error:()=>{throw Error("not implemented yet")}}),p(1))}setEmployees(e){this.employeeList.next(e)}getEmployeeSchedule(e,t){return!e||!t?C({success:!0,payload:null}):this.http.get(`/v1/employees/${e}/schedules?date=${t.format("YYYY-MM-DD")}`).pipe(u(s=>l(o({},s),{payload:Q(s.payload,t)})),d({next:s=>{},error:s=>{throw console.log(s),Error("not implemented yet")}}),p(1))}getListEmployees(){return this.http.get("/v1/employees").pipe(p(1))}getEmployeesById(e){return this.http.get(`/v1/employees/${e}`).pipe(p(1))}addNewEmployee(e){return this.http.post("/v1/employees",e).pipe(p(1))}updateEmployee(e,t){return this.http.put(`/v1/Employees/${e}`,t).pipe(p(1))}updateEmployeeActivation(e,t){return this.http.put(`/v1/Employees/${e}/activation`,{active:t}).pipe(p(1))}};i.\u0275fac=function(t){return new(t||i)(b(w))},i.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var Ve=(()=>{let i=class i{constructor(e){this.http=e,this.serviceList=new m(null),this.selectedService=new m(null)}getServices(){return this.http.get("/v1/services").pipe(u(e=>(console.log(e),e)),d({next:e=>{console.log(e),this.setServiceList(e.payload)},error:e=>{throw console.log(e),Error("not implemented yet")}}),p(1))}setServiceList(e){this.serviceList.next(e)}setSelectedService(e){this.selectedService.next(e)}getService(e){return this.http.get(`/v1/services/${e}`).pipe(u(t=>l(o({},t),{payload:l(o({},t.payload),{subServices:t.payload.subServices.map(s=>l(o({},s),{duration:s.duration/60}))})})),d({next:t=>this.setSelectedService(t.payload),error:()=>{throw Error("not implemented yet")}}),p(1))}addNewService(e){return this.http.post("/v1/services",e).pipe(p(1))}updateService(e,t){return this.http.put(`/v1/services/${e}`,t).pipe(p(1))}deleteService(e){return this.http.delete(`/v1/services/${e}`).pipe(p(1))}getImageFile(e){return this.http.get("/images/"+e,{responseType:"blob"}).pipe(u(t=>new File([t],"service-img",{type:t.type})))}};i.\u0275fac=function(t){return new(t||i)(b(w))},i.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var Xe=(()=>{let i=class i{constructor(e){this.http=e,this.DEFAULT_SUBSERVICE_DURATION=60,this.DEFAULT_OPENING_HOUR=8,this.DEFAULT_CLOSING_HOUR=17,this.insertedAppointment=new m(null),this.selectedSubService=new m(null),this.enablePostAppointment=new m(!1),this.selectedEmployee=new m(null),this.businessHours=new m({start:c().hour(this.DEFAULT_OPENING_HOUR).minute(0).second(0).millisecond(0),end:c().hour(this.DEFAULT_CLOSING_HOUR).minute(0).second(0).millisecond(0)}),this.nonAvailableHours=new m([]),this.referenceDate=new m(c().date(1).hour(0).minute(0).second(0).millisecond(0)),this.selectedDate=new m(K(c().hour(this.DEFAULT_OPENING_HOUR).minute(0).second(0).millisecond(0),c().hour(this.DEFAULT_OPENING_HOUR).minute(0).second(0).millisecond(0),c().hour(this.DEFAULT_CLOSING_HOUR).minute(0).second(0).millisecond(0),this.DEFAULT_SUBSERVICE_DURATION)),this.appointmentsHistory=new m(null),this.appointment=new m(null),this.appointmentList=new m(null),this.dailyTaskDate=new m(c()),this.dailyTaskDetails=new m(null),this.selectedEmployee$=this.selectedEmployee.asObservable(),this.selectedSubService$=this.selectedSubService.asObservable(),this.referenceDate$=this.referenceDate.asObservable(),this.selectedDate$=this.selectedDate.asObservable(),this.businessHours$=this.businessHours.asObservable(),this.nonAvailableHours$=this.nonAvailableHours.asObservable(),this.insertedAppointment$=this.insertedAppointment.asObservable(),this.enablePostAppointment$=this.enablePostAppointment.asObservable(),this.appointmentsHistory$=this.appointmentsHistory.asObservable(),this.appointment$=this.appointment.asObservable(),this.appointmentList$=this.appointmentList.asObservable(),this.dailyTaskDate$=this.dailyTaskDate.asObservable(),this.dailyTaskDetails$=this.dailyTaskDetails.asObservable()}setSelectedSubService(e){this.selectedSubService.next(e)}setNonAvailableHours(e){this.nonAvailableHours.next(e)}getSelectedDateValue(){return this.selectedDate.value}setBusinessHours(e){if(!e){this.businessHours.next(null);return}let t=this.getSelectedDateValue().start;e.start=I(c(e.start),t),e.end=I(c(e.end),t),this.businessHours.next(e)}updateReferenceDate(e){this.referenceDate.next(e)}updateSelectedDate(e){if(this.businessHours.value){let t={start:L(e,this.businessHours.value.start),end:L(e,this.businessHours.value.end)};this.businessHours.next({start:e.hour(t.start.hour()).minute(t.start.minute()).second(0).millisecond(0),end:e.hour(t.end.hour()).minute(t.end.minute()).second(0).millisecond(0)}),this.selectedDate.next(W({start:e,end:e.add(this.selectedSubService.value?this.selectedSubService.value.duration:this.DEFAULT_SUBSERVICE_DURATION,"minute")},t))}else this.selectedDate.next({start:e,end:e,dailyPercentage:0,duration:0,percentageStart:0,percentageEnd:0})}getReferenceDate(){return this.referenceDate$}setSelectedEmployee(e){this.selectedEmployee.next(e)}checkEnablePostAppointment(){this.enablePostAppointment.next(!!(!this.insertedAppointment.value&&this.selectedSubService.value&&this.selectedEmployee.value&&this.selectedDate.value&&this.businessHours.value!==null))}postAppointment(){if(!this.selectedSubService.value||!this.selectedEmployee.value?._id)throw Error("not implemented yet : Veuillez s\xE9lectionnez une offre et un employ\xE9");let e={appointmentDate:this.selectedDate.value.start.toDate(),employeeId:this.selectedEmployee.value._id,subServiceSlug:this.selectedSubService.value.slug},t=this.http.post("/v1/appointments",e).pipe(d({next:s=>{console.log(s),this.insertedAppointment.next(s.payload),this.enablePostAppointment.next(!1)},error:s=>{throw console.log(s),Error("not implemented yet")}}),p(1));return t.subscribe(s=>{},s=>console.log("error",s)),t}getAppointmentsHistory(){return this.http.get("/v1/appointments/history").pipe(u(e=>l(o({},e),{payload:e.payload.map(t=>{let s=c(t.appointmentDate),n=t.duration/60;return l(o({},t),{appointmentDate:s,appointmentDateEnd:s.add(n,"minute"),duration:n})})})),d({next:e=>{this.appointmentsHistory.next(e.payload)},error:e=>{throw console.log(e),Error("not implemented yet : api error")}}),p(1))}getAppointment(e){if(!e)throw new Error("!appointmentId");return this.http.get(`/v1/appointments/${e}`).pipe(u(t=>{let s=t.payload.duration/60,n=c(s);return l(o({},t),{payload:l(o({},t.payload),{duration:s,appointmentDate:n})})}),d({next:t=>{this.appointment.next(t.payload)},error:t=>{throw console.log(t),Error("not implemented yet : api error")}}),p(1))}payAppointment(){let e=this.appointment.value;if(e){if(e.status>0)throw new Error("Ce rendez-vous a d\xE9ja \xE9t\xE9 pay\xE9")}else throw new Error("Impossibilit\xE9 d'effectuer un paiement. !Paiement");return this.http.put(`/v1/appointments/${e._id}/pay`,{}).pipe(u(t=>{let s=t.payload.duration/60,n=c(s);return l(o({},t),{payload:l(o({},t.payload),{duration:s,appointmentDate:n})})}),d({next:t=>{this.appointment.next(t.payload)},error:t=>{throw console.log(t),Error("not implemented yet : api error")}}),p(1))}validateAppointmentDone(e){if(e){if(e.status===3)throw new Error("Ce rendez-vous a d\xE9ja \xE9t\xE9 effectu\xE9. Vous ne pouvez plus valider ce rendez-vous");if(!this.appointmentList.value||!this.appointmentList.value.some(t=>t._id===e._id))throw new Error("Can't update an appointment that is not in the appointments' list")}else throw new Error("Impossibilit\xE9 de mettre \xE0 jour le status \xE0 'fait'. !AppointmentDetails");return this.http.put(`/v1/appointments/${e._id}/done`,{}).pipe(u(t=>{let s=t.payload.duration/60,n=c(s);return l(o({},t),{payload:l(o({},t.payload),{duration:s,appointmentDate:n})})}),d({next:t=>{this.appointmentList.value&&this.appointmentList.next(this.appointmentList.value.map(s=>l(o({},s),{status:s._id===t.payload._id?t.payload.status:s.status})))},error:t=>{throw console.log(t),Error("not implemented yet : api error")}}),p(1))}getAppointments(){if(!this.selectedDate.value)throw new Error("no selected date provided");return this.http.get(`/v1/appointments?referenceDate=${this.selectedDate.value.start.format("YYYY-MM-DD")}`).pipe(u(e=>l(o({},e),{payload:e.payload.map(t=>{let s=c(t.appointmentDate),n=t.duration/60,h=t.client.firstname+" "+t.client.lastname;return l(o({},t),{appointmentDate:s,appointmentDateEnd:s.add(n,"minute"),duration:n,client:l(o({},t.client),{name:h})})})})),d({next:e=>{this.appointmentList.next(e.payload)},error:e=>{throw console.log(e),Error("not implemented yet : api error")}}),p(1))}getAppointmentDailyTasks(){if(!this.dailyTaskDate.value)throw new Error("no selected date provided");return this.http.get(`/v1/appointments/daily-tasks/${this.dailyTaskDate.value.format("YYYY-MM-DD")}`).pipe(u(e=>l(o({},e),{payload:l(o({},e.payload),{appointments:e.payload.appointments.map(t=>{let s=c(t.appointmentDate),n=t.duration/60,h=t.client.firstname+" "+t.client.lastname;return l(o({},t),{appointmentDate:s,appointmentDateEnd:s.add(n,"minute"),duration:n,client:h})})})})),d({next:e=>{this.dailyTaskDetails.next(e.payload)},error:e=>{throw console.log(e),Error("not implemented yet : api error")}}),p(1))}};i.\u0275fac=function(t){return new(t||i)(b(w))},i.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();export{Oe as a,He as b,Be as c,Ve as d,Xe as e,re as f,ke as g,Te as h};
